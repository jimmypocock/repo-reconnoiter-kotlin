spring:
  # Datasource properties automatically configured by Testcontainers @ServiceConnection
  # When running in CI/CD, DATABASE_URL env var overrides Testcontainers
  datasource:
    url: ${DATABASE_URL:}  # Empty default - Testcontainers provides value
    username: ${DATABASE_USERNAME:}
    password: ${DATABASE_PASSWORD:}
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    hibernate:
      ddl-auto: none  # Don't auto-create schema - use Flyway migrations
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect
        format_sql: false
        show_sql: false
    show-sql: false

  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration
    baseline-version: 0

  sql:
    init:
      mode: never  # Let Flyway handle schema

# Application configuration
app:
  frontend:
    url: http://localhost:3000  # Test frontend URL

# JWT configuration for tests
jwt:
  secret: test-secret-key-for-testing-only-not-production-use-at-least-32-characters-long
  expiration: 86400000  # 24 hours

# Sentry configuration - use dummy valid DSN format to avoid validation errors
sentry:
  dsn: https://public@sentry.example.com/1  # Valid format but fake endpoint
  enabled: false  # Disable Sentry in tests

logging:
  level:
    org.springframework: WARN
    org.hibernate: WARN
    com.reconnoiter.api: INFO
